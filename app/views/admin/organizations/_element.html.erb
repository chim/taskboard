<% 
element_class = element.class.to_s.downcase
parent_class = parent.class.to_s.downcase
current_member_admins_parent = (element_class == 'member') ? current_member.admin? || (current_member.admins?(parent) && !element.admin?) : (current_member.admins?(parent))
%>
<div id="<%= parent_class -%>-<%= parent.id -%>-<%= element_class -%>-<%= element.id -%>" class="admin-div-element-core admin-div-element<%= '-actions' if current_member_admins_parent -%>">
	<%
	# If the user admins the organization i should display remove, edit, and change admin settings
	if current_member_admins_parent
	-%>
		<%= # Remove for a project
			link_to_remote image_tag("admin/admin-div-element-remove.png", :alt => "Remove",
	                    	:class => "admin-div-element-actions-remove", :title => "Remove"),
	                    :url => admin_project_url(element.id),
	                    :method => :delete,
	                    :confirm => "Are you sure?",
	                    :success => "Effect.Puff($('organization-#{parent.id}-project-#{element.id}'));" if (element_class == 'project') 
		-%>
		<%= # Remove for a member
			link_to_remote image_tag("admin/admin-div-element-remove.png", :alt => "Remove", 
		                  :class => "admin-div-element-actions-remove", :title => "Remove"
		                 ),
		                 :url => { 
		                   :controller => "admin/#{parent_class}s", 
		                   :action => "remove_#{element_class}", 
		                   :id => parent.id, 
		                   :object => element.id 
		                 },
		                 :confirm => 'Are you sure?',
		                 :success => "Effect.Puff($('#{parent_class}-#{parent.id}-#{element_class}-#{element.id}'));" if !(element_class == 'project') 
		-%>
		<%= # Edit
			link_to_remote image_tag("admin/admin-div-element-edit.png", :alt => "Edit",
	                :class => "admin-div-element-actions-edit", :title => "Edit"),
	              :url => { 
	                :controller => "admin/#{element_class}s", 
	                :action => :edit, 
	                :id => element.id
	              }, :method => :get, :update => "dummy-for-actions"
		
		-%>
		<%= # Admin info
			show_admin_info_for element, parent if element_class == 'member'
		-%>
	<% end -%>
	<% # Write element name
	not_mine = (element_class == 'project' && !current_member.projects.include?(element) ) ? 'not-mine' : ''
	%>
	<div id="name-<%= parent_class%>-<%= parent.id %>-<%= element_class -%>-<%= element.id -%>-container">
		<p id="name-<%= parent_class%>-<%= parent.id %>-<%= element_class -%>-<%= element.id -%>" title="<%= element.name -%>" class="<%=  not_mine %>">
			<%= show_admin_info_for element, parent if (element_class == 'member' && !current_member_admins_parent) -%>
			<%= link_to(element.name, :controller => "/taskboard", :action => :show, :id => element.id) if element_class == 'project' %>
			<%= element.name if element_class != 'project' -%>
		</p>
	</div>
	<script>
		resizeFontSizeToFit($('name-<%= parent_class%>-<%= parent.id %>-<%= element_class -%>-<%= element.id -%>'),$('name-<%= parent_class%>-<%= parent.id %>-<%= element_class -%>-<%= element.id -%>-container'));
<% if !current_member_admins_parent -%>
		$('name-<%= parent_class%>-<%= parent.id %>-<%= element_class -%>-<%= element.id -%>').setStyle({ width: '100%' });
<% end -%>
	</script>
</div>
